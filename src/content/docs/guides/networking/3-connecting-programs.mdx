---
title: Connecting Programs over the Network
description: Learn how to build two programs that can communicate with each other over the local network.
category: Guides
author: Brianna Laird
lastupdated: August 5th 2024
---

import { Tabs, TabItem } from "@astrojs/starlight/components";

**{frontmatter.description}**  
Written by: {frontmatter.author}  
_Last updated: {frontmatter.lastupdated}_

---

This guide will show you how to build the foundational blocks for building programs that can communicate with one another. We'll start by setting up a server (the host program) that listens for incoming connections and processes data sent by clients. Then, we’ll move on to creating a client program that can connect to the server, send messages, and receive responses. By the end of this guide, you’ll have a solid understanding of how to build basic networking applications.

The concepts and code you learn here can be extended in countless ways:

- Multiplayer Games: Develop real-time multiplayer games where players interact with each other over a network.
- Chat Applications: Create chat applications that support multiple users communicating simultaneously.
- Remote Control: Build applications that allow you to control devices remotely, such as smart home systems.

The possibilities are endless!

## Server and Client Programs

The server program is responsible for working as the program to which other programs connect. It listens for incoming connections and processes the data sent by the clients. The server program is built using the `create_server_with_port`, found [here](/api/networking/#create-server-1), function to establish a server that listens for incoming connections on the specified port. The server program then processes the data sent by the clients and sends a confirmation message back to the client.

The client program is the program that connects to the server program. It sends messages to the server and receives responses. The client program is built using the by using `open_connection`, found [here](/api/networking/#open-connection) to establish a connection to the server. A break down of each network function used can be found under the [How to use Network Functions](/guides/networking/4-network-functions) page.

## Part 1: Establishing a Connection

To start, lets work on building two programs that can establish a connection with each other. We will build a simple server program that listens for incoming connections and prints the connection received. We will also build a simple client program that connects to the server and keeps the connection open.

### Basic Server Program

The server program establishes a server with `create_server_with_port` and listens for incoming connections. When a connection is received, it prints a message to the console. The server program keeps the connection open until the client disconnects. The key to keeping the connections open when building programs that communicate is to use the `check_network_activity` function to monitor network activity.

#### Program Code

<Tabs syncKey="code-language">
  <TabItem label="C++">

```cpp
#include "splashkit.h"

void start_server(const std::string& name, int port) {
    // Assign the server to nullptr to ensure it is not left uninitialised
    server_socket server = nullptr;
    
    // Create the server
    server = create_server(name, port);
    write_line("Server '" + name + "' started, listening on port " + std::to_string(port));

    while (true) {
        // Check for new connections and network activity
        check_network_activity();
        
        // Accept new connections
        if (accept_new_connection(server)) {
            // Get the last connection
            connection client_connection = last_connection(server);
            unsigned int client_ip = connection_ip(client_connection);
            write_line("Connected by " + std::to_string(client_ip));

            // Keep the connection open
            while (is_connection_open(client_connection)) {
                check_network_activity();
            }

            // Client disconnected
            write_line("Client " + std::to_string(client_ip) + " disconnected.");
        }
    }

    // Close the server
    if (server != nullptr) {
        close_server(server);
    }
    write_line("Server closed.");
}

int main() {
    start_server("MyServer", 65432);
    return 0;
}
```

  </TabItem>
  <TabItem label="C#">

```csharp

```

  </TabItem>
  <TabItem label="Python">

```python
from splashkit import *

def start_server(name, port):
    try:
        # Create the server
        server = create_server_with_port(name, port)
        print(f"Server '{name}' started, listening on port {port}")

        while True:
            # Check for new connections and network activity
            check_network_activity()
            
            # Check for new connections
            if accept_new_connection(server):
                # Get the last connection
                connection = last_connection(server)
                client_name = connection_ip(connection)
                print(f"Connected by {client_name}")

                # Keep the connection open
                while is_connection_open(connection):
                    check_network_activity()
           
    finally:
        if server:
            # Close the server
            close_connection(server)
        print("Server closed.")

if __name__ == "__main__":
    start_server("MyServer", 65432)
```

  </TabItem>
</Tabs>

### Basic Client Program

The client program uses the `open_connection` function to establish a connection to the server. The client program then connects to the server with the given port, we then use a `while` loop for the connection. While `is_connection_open` is true, the client program will keep the connection open by using the `check_network_activity` function to monitor network activity.

<Tabs syncKey="code-language">
  <TabItem label="C++">

```cpp
#include "splashkit.h"
#include <string>

void start_client(const std::string& name, const std::string& host = "127.0.0.1", int port = 65432) {
    // Create the client connection
    connection client = open_connection(name, host, port);
    write_line("Connected to server at " + host + ":" + std::to_string(port));

    // Keep the connection open
    while (is_connection_open(client)) {
        check_network_activity();
    }

    // Close the client connection
    close_connection(client);
    write_line("Client closed.");
}

int main() {
    start_client("MyClient", "127.0.0.1", 65432);
    return 0;
}

```

  </TabItem>
  <TabItem label="C#">

```csharp

```

  </TabItem>
  <TabItem label="Python">

```python
from splashkit import *

def start_client(name, host='127.0.0.1', port=65432):
    try:
        # Create the client connection
        client = open_connection(name, host, port)
        print(f"Connected to server at {host}:{port}")
        
        # Keep the connection open
        while is_connection_open(client):
            check_network_activity()
        
    finally:
        if client:
            # Close the client connection
            close_connection(client)
        print("Client closed.")

if __name__ == "__main__":
    start_client("MyClient", "127.0.0.1", 65432)
```

  </TabItem>
</Tabs>

### Running the Programs

To run these two programs, you must start the server first. Depending on the programming language you use, this will vary. The example below was done using the cpp version of the server and client programs. Once you've started the server, you can then start the client program. The client program will connect to the server and you should see and keep the connection open until you close the client program.

#### Expected Outputs

In your server program you should see the following output when you first start it:

```bash
Server 'MyServer' started, listening on port 65432
```

Then start the client program and you should see the following output if your client program started successfully:

```bash
Connected to server at 127.0.0.1:65432
```

Looking back at the server program, there should be a new line that says:

```bash
Connected by 2130706433
```

![Window with dimensions illustrated](/usage-examples-images-gifs/networking/server-client-tut-starter.png)

## Part 2: Adding message capabilities for the Client Side

Next, we are going to work on adding in messaging capabilities to the client side program, here the client will be able to send a message and the server side will then respond with a confirmation message.

### Server Program With Messaging

To be able to add messaging capabilities into our two programs, we first need to set up the server to check for messages and then read those messages from the connection.

<Tabs syncKey="code-language">
  <TabItem label="C++">

```cpp
#include "splashkit.h"
#include <stdexcept> 
#include <string> 

void start_server(const string& name, int port) {
    server_socket server = nullptr;
    try {
        // Create the server
        server = create_server(name, port);
        write_line("Server '" + name + "' started, listening on port " + std::to_string(port));

        while (true) {
            // Check for new connections and network activity
            check_network_activity();
            
            if (accept_new_connection(server)) {
                connection client_connection = last_connection(server);
                unsigned int client_ip = connection_ip(client_connection);
                write_line("Connected by " + std::to_string(client_ip));

                while (is_connection_open(client_connection)) {
                    // Read message data from the connection
                    if (has_messages(client_connection)) {
                        string data = read_message_data(client_connection);
                        write_line("Message read attempt...");
                        if (data.empty()) {
                            break;
                        }
                        write_line("Received from client: " + data);

                        // Send confirmation back to the client
                        string confirmation_message = "Server received the message: " + data;
                        send_message_to(confirmation_message, client_connection);
                        write_line("Responded to client " + std::to_string(client_ip));
                    }
                    check_network_activity();
                }

                // Client disconnected
                write_line("Client " + std::to_string(client_ip) + " disconnected.");
            }
        }
    } catch (const std::exception& e) {
        write_line("Server error: " + string(e.what()));
    }

    if (server != nullptr) {
        close_server(server);
    }
    write_line("Server closed.");
}

int main() {
    start_server("MyServer", 65432);
    return 0;
}
```

  </TabItem>
  <TabItem label="C#">

```csharp
using System;
using SplashKitSDK;

public class Client
{
    public static void StartClient(string name, string host = "127.0.0.1", int port = 65432)
    {
        // Create the client connection
        Connection client = SplashKit.OpenConnection(name, host, (ushort)port);
        SplashKit.WriteLine("Connected to server at " + host + ":" + port);

        while (SplashKit.IsConnectionOpen(client))
        {
            // Get user input
            SplashKit.Write("Enter message to send (or 'exit' to quit): ");
            string message = SplashKit.ReadLine();
            if (message.ToLower() == "exit")
            {
                break;
            }
            // Send data to the server
            SplashKit.WriteLine("Sending message: " + message);
            SplashKit.SendMessageTo(message, client);
            
            // Check for new network activity and wait for the server response
            while (true)
            {
                SplashKit.CheckNetworkActivity();
                if (SplashKit.HasMessages(client))
                {
                    string msg = SplashKit.ReadMessageData(client);
                    SplashKit.WriteLine("Received from server: " + msg);
                    break;
                }
            }
        }

        // Close the client connection
        SplashKit.CloseConnection(client);
        SplashKit.WriteLine("Client closed.");
    }

    public static void Main()
    {
        StartClient("MyClient", "127.0.0.1", 65432);
    }
}
```

  </TabItem>
  <TabItem label="Python">

```python
from splashkit import *

def start_server(name, port):
    try:
        # Create the server
        server = create_server_with_port(name, port)
        print(f"Server '{name}' started, listening on port {port}")

        while True:
            # Check for new connections and network activity
            check_network_activity()
            
            if accept_new_connection(server):
                connection = last_connection(server)
                client_name = connection_ip(connection)
                print(f"Connected by {client_name}")

                while is_connection_open(connection):
                    # Read message data from the connection
                    if has_messages_on_connection(connection):
                        data = read_message_data_from_connection(connection)
                        if not data:
                            break
                        print(f"Received from client: {data}")

                        # Send confirmation back to the client
                        confirmation_message = f"Server received the message: {data}"
                        send_message_to_connection(confirmation_message, connection)
                        print(f"Responded to client {client_name}")
                    check_network_activity()
                
                # Client disconnected
                print(f"Client {client_name} disconnected.")
    except Exception as e:
        print(f"Server error: {e}")
    finally:
        if server:
            close_connection(server)
        print("Server closed.")

if __name__ == "__main__":
    start_server("MyServer", 65432)
```

  </TabItem>
</Tabs>

### Client Program With Messaging

<Tabs syncKey="code-language">
  <TabItem label="C++">

```cpp
#include "splashkit.h"
#include <string> 

void start_client(const string& name, const string& host = "127.0.0.1", int port = 65432) {
    // Create the client connection
    connection client = open_connection(name, host, port);
    write_line("Connected to server at " + host + ":" + std::to_string(port));

    while (is_connection_open(client)) {
        // Get user input
        write("Enter message to send (or 'exit' to quit): ");
        string message = read_line();
        if (message == "exit") {
            break;
        }
        // Send data to the server
        write_line("Sending message: " + message);
        send_message_to(message, client);
        
        // Check for new network activity and wait for the server response
        while (true) {
            check_network_activity();
            if (has_messages(client)) {
                string msg = read_message_data(client);
                write_line("Received from server: " + msg);
                break;
            }
        }
    }

    // Close the client connection
    close_connection(client);
    write_line("Client closed.");
}

int main() {
    start_client("MyClient", "127.0.0.1", 65432);
    return 0;
}
```

  </TabItem>
  <TabItem label="C#">

```csharp
using System;
using SplashKitSDK;

public class Client
{
    public static void StartClient(string name, string host = "127.0.0.1", int port = 65432)
    {
        // Create the client connection
        Connection client = SplashKit.OpenConnection(name, host, (ushort)port);
        SplashKit.WriteLine("Connected to server at " + host + ":" + port);

        while (SplashKit.IsConnectionOpen(client))
        {
            // Get user input
            SplashKit.Write("Enter message to send (or 'exit' to quit): ");
            string message = SplashKit.ReadLine();
            if (message.ToLower() == "exit")
            {
                break;
            }
            // Send data to the server
            SplashKit.WriteLine("Sending message: " + message);
            SplashKit.SendMessageTo(message, client);
            
            // Check for new network activity and wait for the server response
            while (true)
            {
                SplashKit.CheckNetworkActivity();
                if (SplashKit.HasMessages(client))
                {
                    string msg = SplashKit.ReadMessageData(client);
                    SplashKit.WriteLine("Received from server: " + msg);
                    break;
                }
            }
        }

        // Close the client connection
        SplashKit.CloseConnection(client);
        SplashKit.WriteLine("Client closed.");
    }

    public static void Main()
    {
        StartClient("MyClient", "127.0.0.1", 65432);
    }
}
```

  </TabItem>
  <TabItem label="Python">

```python
from splashkit import *

def start_client(name, host='127.0.0.1', port=65432):
    # Create the client connection
    client = open_connection(name, host, port)
    print(f"Connected to server at {host}:{port}")

    while is_connection_open(client):
        # Get user input
        message = input("Enter message to send (or 'exit' to quit): ")
        if message.lower() == 'exit':
            break
        # Send data to the server
        print(f"Sending to server: {message}")
        send_message_to_connection(message, client)
        # Check for new network activity and wait for the server response
        while True:
            check_network_activity()
            if has_messages_on_connection(client):
                msg = read_message_data_from_connection(client)
                print(f"Received from server: {msg}")
                break

    # Close the client connection
    close_connection(client)

if __name__ == "__main__":
    start_client("MyClient", "127.0.0.1", 65432)
```

  </TabItem>
</Tabs>