---
title: How to use network functions
description: Learn how to use different network functions within your programs.
category: Guides
author: Brianna Laird
lastupdated: August 5th 2024
---

import { Tabs, TabItem } from "@astrojs/starlight/components";

**{frontmatter.description}**  
Written by: {frontmatter.author}  
_Last updated: {frontmatter.lastupdated}_

---

This article covers use cases on how to use different network functions in your programs.

These functions are used in the tutorials:

## Servers

In order to connect two programs together, you need to build a host program. This will function as a server, and it can be done using this server function:

### Create Server with Port

In our tutorial, we used the `create_server_with_port` function, as detailed [here](/api/networking/#create-server), to establish a server within our host program. This function sets up the server to listen for incoming connections on the specified port. We then print a confirmation message using an f-string to display the server name and port number:

<Tabs syncKey="code-language">
  <TabItem label="C++">

```cpp
server = create_server(name, port);
write_line("Server '" + name + "' started, listening on port " + to_string(port));
```

  </TabItem>
  <TabItem label="C#">

```csharp
server = SplashKit.CreateServer(name, (ushort)port);
SplashKit.WriteLine("Server '" + name + "' started, listening on port " + port);
```

  </TabItem>
  <TabItem label="Python">

```python
server = create_server_with_port(name, port)
print(f"Server '{name}' started, listening on port {port}")
```

  </TabItem>
</Tabs>

---

## Checking for Network Activity

The key to enabling communication between programs is to check for network activity, which is essential for both the host and the clients (programs that connect to the host). Use the `check_network_activity` function, as detailed [here](/api/networking/#check-network-activity), to monitor network activity.

<Tabs syncKey="code-language">
  <TabItem label="C++">

```cpp
SplashKit.CheckNetworkActivity();
```

  </TabItem>
  <TabItem label="C#">

```csharp
check_network_activity();
```

  </TabItem>
  <TabItem label="Python">

```python
check_network_activity():
```

  </TabItem>
</Tabs>

## Connections

### Opening Connections

For the client program in our tutorial to connect to the server, we need to open a connection. This can be done with the `open_connection` function, as detailed [here](/api/networking/#open-connection). This opens up the connection to the specified host and port, along with the name for the client. It then prints to the terminal if this opened connection has connected to our server.

<Tabs syncKey="code-language">
  <TabItem label="C++">

```cpp
connection client = open_connection(name, host, port);
write_line("Connected to server at " + host + ":" + to_string(port));
```

  </TabItem>
  <TabItem label="C#">

```csharp
Connection client = SplashKit.OpenConnection(name, host, (ushort)port);
SplashKit.WriteLine("Connected to server at " + host + ":" + port);
```

  </TabItem>
  <TabItem label="Python">

```python
client = open_connection(name, host, port)
print(f"Connected to server at {host}:{port}")
```

  </TabItem>
</Tabs>

### Accepting New Connections

In the server code of the tutorial, we use `accept_new_connection`, as detailed [here](/api/networking/#accept-new-connection), for the `if` loop. While this loop is active, everything inside will occur. After establishing the connection, you could add whatever you can think of when building programs that communicate.

<Tabs syncKey="code-language">
  <TabItem label="C++">

```cpp
if (accept_new_connection(server)) {
}
```

  </TabItem>
  <TabItem label="C#">

```csharp
if (SplashKit.AcceptNewConnection(server))
{
  
}
```

  </TabItem>
  <TabItem label="Python">

```python
if accept_new_connection(server):
```

  </TabItem>
</Tabs>

### Checking Connection is Open

Similar to how the `accept_new_connection` was used in an `if` loop, the `is_connection_open` function, as detailed [here](/api/networking/#is-connection-open), is used as a `while` loop in the client program. For the client, inside this loop is where you'll put all the things you want to happen while this connection exists.

<Tabs syncKey="code-language">
  <TabItem label="C++">

```cpp
while (is_connection_open(client)) {
}
```

  </TabItem>
  <TabItem label="C#">

```csharp
while (SplashKit.IsConnectionOpen(client))
{
}
```

  </TabItem>
  <TabItem label="Python">

```python
while is_connection_open(client):
```

  </TabItem>
</Tabs>

### Checking The Last Connection

In our server, as we are working with only one program connecting to it. We use the `last_connection` function, as detailed [here](/api/networking/#last-connection), for assigning the connection to a variable. This is then used to check for the last connection made to the server, which would be the client program.

<Tabs syncKey="code-language">
  <TabItem label="C++">

```cpp
connection client_connection = last_connection(server);
```

  </TabItem>
  <TabItem label="C#">

```csharp
Connection clientConnection = SplashKit.LastConnection(server);
```

  </TabItem>
  <TabItem label="Python">

```python
connection = last_connection(server)
```

  </TabItem>
</Tabs>

### Checking the connection IP

In the server program, we use the `connection_ip` function, as detailed [here](/api/networking/#connection-ip), to get the IP address of the client program (this was our last connection). This is then used to print a message to the terminal, showing the IP address of the client program thats currently connected.

<Tabs syncKey="code-language">
  <TabItem label="C++">

```cpp
unsigned int client_ip = connection_ip(client_connection);
write_line("Connected by " + to_string(client_ip));
```

  </TabItem>
  <TabItem label="C#">

```csharp
uint clientIp = SplashKit.ConnectionIP(clientConnection);
SplashKit.WriteLine("Connected by " + clientIp);
```

  </TabItem>
  <TabItem label="Python">

```python
client_name = connection_ip(connection)
print(f"Connected by {client_name}")
```

  </TabItem>
</Tabs>

### Close Connection

When the client program is done communicating with the server, it will close the connection. This is done using the `close_connection` function, as detailed [here](/api/networking/#close-connection). This function closes the connection to the server and prints a message to the terminal to confirm that the connection has been closed. This is an important step to ensure that the connection is closed properly.

<Tabs syncKey="code-language">
  <TabItem label="C++">

```cpp
if (server != nullptr) {
  close_server(server);
}
write_line("Server closed.");
```

  </TabItem>
  <TabItem label="C#">

```csharp
if (server != null)
{
  SplashKit.CloseServer(server);
}
SplashKit.WriteLine("Server closed.");
```

  </TabItem>
  <TabItem label="Python">

```python
if server:
  close_connection(server)
print("Server closed.")
```

  </TabItem>
</Tabs>

## Sending Messages

To send messages, we can use a variety of different Splashkit functions to send, process, and receive messages.

### Send Message To

 To start, we can use the `send_message_to` function, as detailed [here](/api/networking/#send-message-to), to send a message.

#### For our Client Side

In our messaging application tutorial, found [here](/docs/guides/networking/4-messaging-application), we use the following to send a message to the server. This function sends the message to the server and prints a message to the terminal to confirm that the message has been sent.

<Tabs syncKey="code-language">
  <TabItem label="C++">

```cpp
write_line("Sending message: " + message);
send_message_to(message, client);
```

  </TabItem>
  <TabItem label="C#">

```csharp
SplashKit.WriteLine("Sending message: " + message);
SplashKit.SendMessageTo(message, client);
```

  </TabItem>
  <TabItem label="Python">

```python
print(f"Sending to server: {message}")
send_message_to_connection(message, client)
```

  </TabItem>
</Tabs>

#### For our Server Side

In the server program, we use the `send_message_to` function to send a message to the client program. This function sends the message to the client and prints a message to the terminal to confirm that the message has been sent.

<Tabs syncKey="code-language">
  <TabItem label="C++">

```cpp
string confirmation_message = "Server received the message: " + data;
send_message_to(confirmation_message, client_connection);
write_line("Responded to client " + to_string(client_ip));
```

  </TabItem>
  <TabItem label="C#">

```csharp
string confirmationMessage = "Server received the message: " + data;
SplashKit.SendMessageTo(confirmationMessage, clientConnection);
SplashKit.WriteLine("Responded to client " + clientIp);
```

  </TabItem>
  <TabItem label="Python">

```python
confirmation_message = f"Server received the message: {data}"
send_message_to_connection(confirmation_message, connection)
print(f"Responded to client {client_name}")
```

  </TabItem>
</Tabs>

### Has messages on Connection

A key part of being able to send messages over these programs is to have a loop that continually checks for messages. Similar to how we did for the `check_network_activity` in order to keep the connection open, here we do the same with the `has_messages_on_connection` function, as detailed [here](/api/networking/#has-messages-on-connection). We do this same if loop in both the server and client, so when you're building your programs, think about how you can ensure you're getting the programs to check for the things you want to accomplish.

<Tabs syncKey="code-language">
  <TabItem label="C++">

```cpp
if (has_messages(client_connection)) {
}
```

  </TabItem>
  <TabItem label="C#">

```csharp
if (SplashKit.HasMessages(clientConnection))
{

}
```

  </TabItem>
  <TabItem label="Python">

```python
if has_messages_on_connection(connection):
```

  </TabItem>
</Tabs>


### Reading Message Data from Connection

<Tabs syncKey="code-language">
  <TabItem label="C++">

```cpp
string data = read_message_data(client_connection);
write_line("Message read attempt...");
if (data.empty()) {
  break;
}
write_line("Received from client: " + data);
```

  </TabItem>
  <TabItem label="C#">

```csharp
string data = SplashKit.ReadMessageData(clientConnection);
SplashKit.WriteLine("Message read attempt...");
if (string.IsNullOrEmpty(data))
{
  break;
}
SplashKit.WriteLine("Received from client: " + data)
```

  </TabItem>
  <TabItem label="Python">

```python
data = read_message_data_from_connection(connection)
if not data:
  break
print(f"Received from client: {data}")
```

  </TabItem>
</Tabs>